{"version":3,"sources":["BridgedQuery.ts"],"names":["BridgedQuery","isLoading","_isLoading","hasNext","_hasNext","constructor","queryKey","type","binder","next","result","nativeModule","queryNext","release","queryRelease","DirectCallLogListQuery","RoomListQuery"],"mappings":";;AAGA,OAAO,MAAMA,YAAN,CAA+D;AAGvD,MAATC,SAAS,GAAG;AACd,WAAO,KAAKC,UAAZ;AACD;;AACU,MAAPC,OAAO,GAAG;AACZ,WAAO,KAAKC,QAAZ;AACD;;AAEDC,EAAAA,WAAW,CAAWC,QAAX,EAA+CC,IAA/C,EAAkEC,MAAlE,EAAwF;AAAA,SAA7EF,QAA6E,GAA7EA,QAA6E;AAAA,SAAzCC,IAAyC,GAAzCA,IAAyC;AAAA,SAAtBC,MAAsB,GAAtBA,MAAsB;;AAAA,wCAT9E,KAS8E;;AAAA,sCARhF,KAQgF;AAAE;;AAE3F,QAAJC,IAAI,GAAG;AACX,SAAKP,UAAL,GAAkB,IAAlB;AACA,UAAM;AAAEC,MAAAA,OAAF;AAAWO,MAAAA;AAAX,QAAsB,MAAM,KAAKF,MAAL,CAAYG,YAAZ,CAAyBC,SAAzB,CAAmC,KAAKN,QAAxC,EAAkD,KAAKC,IAAvD,CAAlC;AACA,SAAKH,QAAL,GAAgBD,OAAhB;AACA,SAAKD,UAAL,GAAkB,KAAlB;AACA,WAAOQ,MAAP;AACD;;AAEDG,EAAAA,OAAO,GAAG;AACR,SAAKL,MAAL,CAAYG,YAAZ,CAAyBG,YAAzB,CAAsC,KAAKR,QAA3C;AACD;;AAtBmE;AAyBtE,OAAO,MAAMS,sBAAN,SAAqCf,YAArC,CAAmF;AAC1F,OAAO,MAAMgB,aAAN,SAA4BhB,YAA5B,CAAoE","sourcesContent":["import { NativeQueryKey, NativeQueryType, Query } from '../types/Query';\nimport NativeBinder from './NativeBinder';\n\nexport class BridgedQuery<T extends NativeQueryType> implements Query {\n  private _isLoading = false;\n  private _hasNext = false;\n  get isLoading() {\n    return this._isLoading;\n  }\n  get hasNext() {\n    return this._hasNext;\n  }\n\n  constructor(protected queryKey: NativeQueryKey, protected type: T, protected binder: NativeBinder) {}\n\n  async next() {\n    this._isLoading = true;\n    const { hasNext, result } = await this.binder.nativeModule.queryNext(this.queryKey, this.type);\n    this._hasNext = hasNext;\n    this._isLoading = false;\n    return result;\n  }\n\n  release() {\n    this.binder.nativeModule.queryRelease(this.queryKey);\n  }\n}\n\nexport class DirectCallLogListQuery extends BridgedQuery<NativeQueryType.DIRECT_CALL_LOG> {}\nexport class RoomListQuery extends BridgedQuery<NativeQueryType.ROOM_LIST> {}\n"]}